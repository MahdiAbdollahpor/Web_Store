@using Web_Store.Application.Services.Orders.Queries.GetOrdersForAdmin
@using Web_store.Common
@model List<OrdersDto>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Adminlayout.cshtml";
}

<div class="content-wrapper">
    <div class="container-fluid">
        <!-- Zero configuration table -->
        <section id="configuration">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
                            <div class="card-title-wrap bar-success mb-2 mb-md-0">
                                <h4 class="card-title mb-0">لیست سفارشات</h4>
                            </div>
                            <div class="d-none d-md-block">
                                <p class="card-text text-muted mb-0">لیست سفارشات فروشگاه باگتو</p>
                            </div>
                        </div>
                        <div class="card-body collapse show">
                            <div class="card-block card-dashboard">
                                <div class="d-md-none mb-3">
                                    <p class="card-text text-muted">لیست سفارشات فروشگاه باگتو</p>
                                </div>

                                <form method="get" class="row mb-3">
                                    <div class="col-12 col-md-8 col-lg-6">
                                        <div class="input-group">
                                            <input type="text" class="form-control" name="serchkey" placeholder="جستجو در سفارشات...">
                                            <button class="btn btn-success">
                                                <i class="ft-search"></i>
                                                <span class="d-none d-md-inline">جستجو</span>
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered zero-configuration dataTable" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info">
                                        <thead>
                                            <tr role="row">
                                                <th class="sorting_asc min-mobile">شماره سفارش</th>
                                                <th class="sorting_asc min-tablet">تاریخ ثبت سفارش</th>
                                                <th class="sorting_asc min-tablet">شماره فاکتور</th>
                                                <th class="sorting_asc">وضعیت سفارش</th>
                                                <th class="sorting_asc">عملیات</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model)
                                            {
                                                <tr role="row" class="odd">
                                                    <td class="sorting_1">
                                                        <span class="d-md-none fw-bold">شماره سفارش: </span>
                                                        @item.OrderId
                                                    </td>
                                                    <td class="min-tablet">
                                                        <span class="d-md-none fw-bold">تاریخ ثبت: </span>
                                                        @item.InsetTime
                                                    </td>
                                                    <td class="min-tablet">
                                                        <span class="d-md-none fw-bold">شماره فاکتور: </span>
                                                        @item.RequestId
                                                    </td>
                                                    <td>
                                                        <span class="d-md-none fw-bold">وضعیت: </span>
                                                        @{
                                                            string state = EnumHelpers<Web_Store.Domain.Entities.Orders.OrderState>.GetDisplayValue(item.OrderState);
                                                        }
                                                        <span class="badge
                                                            @(item.OrderState == Web_Store.Domain.Entities.Orders.OrderState.Processing ? "badge-warning" :
                                                              item.OrderState == Web_Store.Domain.Entities.Orders.OrderState.Delivered ? "badge-success" :
                                                              "badge-info")">
                                                            @state
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="btn-group-vertical btn-group-sm d-md-flex flex-md-row" role="group">
                                                            <a class="btn btn-info btn-sm mb-1 mb-md-0 me-md-1">
                                                                <i class="ft-user"></i>
                                                                <span class="d-none d-md-inline">کاربر</span>
                                                            </a>
                                                            <a class="btn btn-danger btn-sm">
                                                                <i class="ft-file"></i>
                                                                <span class="d-none d-md-inline">فاکتور</span>
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-sm-12 col-md-5">
                                        <div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">
                                            نمایش 1 تا 10 از 57 سطرها
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-7">
                                        <div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate">
                                            <ul class="pagination justify-content-center justify-content-md-end">
                                                <li class="paginate_button page-item previous disabled" id="DataTables_Table_0_previous">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="0" tabindex="0" class="page-link">
                                                        <i class="ft-chevron-right"></i>
                                                        <span class="d-none d-md-inline">قبلی</span>
                                                    </a>
                                                </li>
                                                <li class="paginate_button page-item active">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="1" tabindex="0" class="page-link">1</a>
                                                </li>
                                                <li class="paginate_button page-item">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="2" tabindex="0" class="page-link">2</a>
                                                </li>
                                                <li class="paginate_button page-item">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="3" tabindex="0" class="page-link">3</a>
                                                </li>
                                                <li class="paginate_button page-item">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="4" tabindex="0" class="page-link">4</a>
                                                </li>
                                                <li class="paginate_button page-item">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="5" tabindex="0" class="page-link">5</a>
                                                </li>
                                                <li class="paginate_button page-item">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="6" tabindex="0" class="page-link">6</a>
                                                </li>
                                                <li class="paginate_button page-item next" id="DataTables_Table_0_next">
                                                    <a href="#" aria-controls="DataTables_Table_0" data-dt-idx="7" tabindex="0" class="page-link">
                                                        <span class="d-none d-md-inline">بعدی</span>
                                                        <i class="ft-chevron-left"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<style>
    @@media (max-width: 768px) {
        .min-tablet {
            display: none;
        }

        .table-responsive {
            border: 1px solid #dee2e6;
        }

        .table td {
            padding: 0.75rem;
            border-bottom: 1px solid #dee2e6;
        }

        .btn-group-vertical {
            width: 100%;
        }

            .btn-group-vertical .btn {
                width: 100%;
                margin-bottom: 5px;
            }

        .card-header {
            padding: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
        }
    }

    @@media (max-width: 576px) {
        .min-mobile {
            display: none;
        }

        .table td, .table th {
            padding: 0.5rem;
            font-size: 0.9rem;
        }

        .btn {
            padding: 0.375rem 0.75rem;
            font-size: 0.8rem;
        }

        .badge {
            font-size: 0.75rem;
        }

        .pagination {
            flex-wrap: wrap;
        }

        .page-item .page-link {
            padding: 0.375rem 0.5rem;
            font-size: 0.8rem;
        }

        .dataTables_info {
            text-align: center;
            margin-bottom: 1rem;
        }
    }

    @@media (max-width: 400px) {
        .table td, .table th {
            padding: 0.25rem;
            font-size: 0.8rem;
        }

        .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }

        .input-group {
            flex-direction: column;
        }

            .input-group .form-control {
                border-radius: 0.25rem;
                margin-bottom: 0.5rem;
            }

            .input-group .btn {
                border-radius: 0.25rem;
                width: 100%;
            }
    }

    /* استایل برای نمایش بهتر در موبایل */
    @@media (max-width: 768px) {
        .table tbody tr {
            display: block;
            margin-bottom: 1rem;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
        }

        .table tbody td {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: none;
            border-bottom: 1px solid #f8f9fa;
        }

            .table tbody td:last-child {
                border-bottom: none;
            }
    }
</style>